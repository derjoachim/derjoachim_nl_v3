<!DOCTYPE html>
<html lang="en-US">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,700italic,700,300' rel='stylesheet' type='text/css'>

	<title>Activity Streams with com_activities</title>
	<meta name="description" content="  As the web becomes more social, a new and interesting way to follow  people across the Internet has emerged. Termed as “Activity Streams”, it is popularize...">

	<link rel="stylesheet" href="/css/main.css">
	<link rel="canonical" href="http://derjoachim.nl/blog/2012/05/activity-streams-with-com_activities/">
	<link rel="alternate" type="application/rss+xml" title="Der Joachim" href="http://derjoachim.nl/feed.xml" />
	<script type="text/javascript">
		/*
		var _gaq = _gaq || [];
 	 	 _gaq.push(['_setAccount', 'UA-22946638-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
			*/
	</script>
</head>

	<body>
		<header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="/">Der Joachim</a>
    <nav class="site-nav">
      <div class="trigger">
          
          <a class="page-link" href="/blog/2012/05/activity-streams-with-com_activities/">Activity Streams with com_activities</a>
          
      </div>
    </nav>
  </div>
</header>

		<div class="post">

  <header class="post-header">
    <h1 class="post-title">Activity Streams with com_activities</h1>
    <p class="post-meta">May 24, 2012 • israel</p>
  </header>

  <article class="post-content">
    <p style="text-align: left;">
  As the web becomes more social, a new and interesting way to follow  people across the Internet has emerged. Termed as “Activity Streams”, it is popularized by sites like Facebook, Twitter, and other social websites, Activity Streams has now become an essential part of “the Social Web”.
</p>




<h3 style="text-align: left;" dir="ltr">
  So what are “Activity Streams”?
</h3>




<p style="text-align: left;">
  On the surface, it looks like a simple record of actions performed by people on the Internet. But what makes it interesting is the philosophy behind it. Activity Streams is rooted to a concept called <a href="http://www.slideshare.net/factoryjoe/activity-streams-socialism-the-future-of-open-source">Activity Theory</a>.
</p>




<p style="text-align: left;">
  We may not be able to discuss the theory in detail , but I am quite certain that Activity Theory may drive the future of the social web. The concept is also very relevant to Open Source communities such as Nooku, as it explores the psychology behind collaboration, motivation and productivity.
</p>




<p style="text-align: left;">
  Philosophy aside, the technology behind Activity Streams is also evolving. As more and more websites use it, a standard is being developed which will allow Activity Streams to be syndicated in its own protocol instead of using RSS or Atom. To know more about the Activity Streams Standard, read the <a href="http://activitystrea.ms/">Draft</a> and the <a href="http://wiki.activitystrea.ms/w/page/1359261/FrontPage">Wiki</a>.
</p>




<h3 style="text-align: left;" dir="ltr">
  Where does Nooku come into play?
</h3>




<p style="text-align: left;">
  To easily integrate Activity Streams in your Nooku application, a new Nooku Component is here at your service &#8211; com_activities. By using this, logging user actions in your Nooku component and rendering Activity Streams can be effortless.
</p>




<p style="text-align: left;">
  <!--more-->
</p>




<p style="text-align: left;">
  How do you use com_activities in your component? Check out this code:
</p>




<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">ComArticlesControllerArticle</span> <span class="k">extends</span> <span class="nx">ComDefaultControllerDefault</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">_initialize</span><span class="p">(</span><span class="nx">KConfig</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$config</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">append</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;behaviors&#39;</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;com://admin/activities.controller.behavior.loggable&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">));</span>

        <span class="k">parent</span><span class="o">::</span><span class="na">_initialize</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>




<p style="text-align: left;">
  In your controller, simply add the “loggable” controller behavior from com_activities. By default, the loggable behavior is triggered on controller actions: add, edit and delete.
</p>




<p style="text-align: left;">
  When the behavior is triggered, it logs the user(actor), the action(verb), the item in which the action was performed(object), the link to the object(target), and some metadata e.g. when the action was performed, and which application was used.
</p>




<p style="text-align: left;">
  When viewing the activity stream, these records are constructed together to form a meaningful sentence like “This <em>User</em> has performed this <em>Action</em> on this <em>Object</em> on this <em>Date</em>”.
</p>




<p style="text-align: left;">
  The behavior is also flexible, you can configure it to track only certain actions such as after login, or after logout as demonstrated in this code:
</p>




<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$config</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">append</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;behaviors&#39;</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span>
         <span class="nv">$this</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">getService</span><span class="p">(</span><span class="s1">&#39;com://admin/activities.controller.behavior.loggable&#39;</span><span class="p">,</span>
         <span class="k">array</span><span class="p">(</span>
             <span class="s1">&#39;title_column&#39;</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>
             <span class="s1">&#39;actions&#39;</span> <span class="nx">     </span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;after.login&#39;</span><span class="p">,</span> <span class="s1">&#39;after.logout&#39;</span><span class="p">)</span>
     <span class="p">))),</span>
<span class="p">));</span></code></pre></div>




<p style="text-align: left;">
  Aside from the HTML view, com_activities can also output the JSON format that follows the emerging Activity Streams standard. To do this, just append format=json in the URL e.g
</p>




<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">?</span><span class="nx">com_activities</span><span class="o">&amp;</span><span class="nx">view</span><span class="o">=</span><span class="nx">activities</span><span class="o">&amp;</span><span class="nx">format</span><span class="o">=</span><span class="nx">json</span><span class="o">.</span></code></pre></div>




<p style="text-align: left;">
  Using Nooku’s RESTful architecture, you can syndicate your component’s activity stream without additional effort.
</p>




<h3 style="text-align: left;" dir="ltr">
  Coming Soon in Nooku 12.2
</h3>




<p style="text-align: left;">
  As the web evolves, Activity Streams can become an integral part of user driven websites. By using Nooku with com_activities, developers can easily integrate it to their applications. It’s a powerful feature and it’s so easy to implement in Nooku.
</p>




<p style="text-align: center;">
  <a title="Nooku Server - Activities by Nooku, on Flickr" href="http://www.flickr.com/photos/nooku/7258732306/"><img class="aligncenter" src="http://farm8.staticflickr.com/7219/7258732306_89ddbc8947.jpg" alt="Nooku Server - Activities" width="500" height="337" /></a>
</p>




<p style="text-align: left;">
  Check the code of com_activities in the  <a href="http://nooku.assembla.com/spaces/nooku-components">Nooku Components</a> trunk or see it in action in <a href="http://nooku.assembla.com/spaces/nooku-server">Nooku Server</a>’s. To view , look for “Activity Logs” under the Tools menu or check out the dashboard which shows the activities in a AJAX overlay. Coming to you in 12.2. Excited ? So are we !
</p>




<p style="text-align: left;">
  Happy Coding!
</p>


  </article>

</div>

		<footer class="site-footer">

</footer>

	</body>
</html>
