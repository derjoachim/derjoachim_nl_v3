<!DOCTYPE html>
<html lang="en-US">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,700italic,700,300' rel='stylesheet' type='text/css'>

	<title>AJAX Widgets with Nooku Framework</title>
	<meta name="description" content="We have been claiming for quite a while now that Nooku Framework helps you to write less code. A lot less! So time to put our money where our mouth is and sh...">

	<link rel="stylesheet" href="/css/main.css">
	<link rel="canonical" href="http://derjoachim.nl/blog/2010/12/ajax-widgets-with-nooku-framework/">
	<link rel="alternate" type="application/rss+xml" title="Der Joachim" href="http://derjoachim.nl/feed.xml" />
	<script type="text/javascript">
		/*
		var _gaq = _gaq || [];
 	 	 _gaq.push(['_setAccount', 'UA-22946638-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
			*/
	</script>
</head>

	<body>
		<header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="/">Der Joachim</a>
    <nav class="site-nav">
      <div class="trigger">
          
          <a class="page-link" href="/blog/2010/12/ajax-widgets-with-nooku-framework/">AJAX Widgets with Nooku Framework</a>
          
      </div>
    </nav>
  </div>
</header>

		<div class="post">

  <header class="post-header">
    <h1 class="post-title">AJAX Widgets with Nooku Framework</h1>
    <p class="post-meta">Dec 1, 2010 • Stian</p>
  </header>

  <article class="post-content">
    <p>We have been claiming for quite a while now that Nooku Framework helps you to write less code. A lot less! So time to put our money where our mouth is and show you a little example.</p>

<p><a href="http://www.flickr.com/photos/nooku/5221979616/" title="Part of the Harbour Dashboard by Nooku, on Flickr"><img src="http://farm6.static.flickr.com/5010/5221979616_c96473e5fa.jpg" alt="Part of the Harbour Dashboard" width="500" height="286" /></a></p>

<p>Today&#8217;s topic: Building an AJAX widget with just a few lines of code, actually just one line. We will be using a new simple technique called overlays. You don’t believe me? Watch and learn!</p>

<!--more-->


<h3>What are Overlays?</h3>

<p>Before we dive into the one line of code, let me explain a little bit about overlays. The term “Overlay” comes from the <a href="https://developer.mozilla.org/en/xul_overlays">Mozilla XUL</a>. In Nooku Framework we have implemented our own inspired version that allows you to turn any view into a widget. Yes, you are reading that right: ANY view, not such your own, any view of any component can be &#8216;widgetised&#8217;.</p>

<p>To create an overlay in Nooku Framework you only need two things:</p>

<ul>
<li>the URL of the view your are &#8216;widgetising&#8217;;</li>
<li>the ID of the HTML element to overlay.</li>
</ul>


<p>It’s really simple, let&#8217;s look at a little example using our beloved <a href="http://www.assembla.com/wiki/show/nooku-examples/com_harbour">Harbour</a> component.</p>

<h3>Overlays in the Harbour dashboard</h3>

<p>Harbour’s dashboard has two tabs in the right sidebar to show boats and ports that are in draft (not all information has been added yet). Currently both are loaded using a PHP call. We’re going to &#8216;widgetise&#8217; this by using an overlay.</p>

<p>Here’s the PHP code rendering the unfinished boats tab contents:</p>

<pre name="code" class="php:nocontrols">&lt;?= KFactory::get('admin::com.harbour.controller.boats')
     -&gt;sort('modified_on')
     -&gt;draft(1)
     -&gt;limit(50)
     -&gt;layout('widget')
     -&gt;browse() ?&gt;</pre>


<p>And here’s what it looks like as an overlay:</p>

<pre name="code" class="php:nocontrols">&lt;?= @overlay(array('uri' =&gt; @route('option=com_harbour&view=ports&layout=widget&draft=1&limit=5#draft-ports'))) ?&gt;</pre>


<p>That&#8217;s it! How does work?</p>

<ul>
<li>The o<em>ption=com_harbour&amp;view=ports&amp;layout=widget</em> defines the component and view we are rendering, in this case we are rendering a list of ports.</li>
<li>The <em>draft=1&amp;limit=5</em> defines the state of the view. In this case we are getting all the port drafts and we only retrieve the first 5</li>
<li>The <em>#draft-ports</em> fragment defines the ID of the HTML element that we’re fetching from the ajax request. Nooku Framework does this behind the scenes for you. This allows you to &#8216;widgetise&#8217; only a part of the page your are fetching.</li>
</ul>


<p>Now you have learned how “Port drafts” is transformed into an ajax widget, the code is so tiny you already know how to do the same thing to “Boat drafts”.</p>

<p>That’s it, simple right? You see, we are serious when we say Nooku Framework really makes you write less code. Why are you still reading? Go play with it already!</p>

  </article>

</div>

		<footer class="site-footer">

</footer>

	</body>
</html>
