<!DOCTYPE html>
<html lang="en-US">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,700italic,700,300' rel='stylesheet' type='text/css'>

	<title>Troubleshooting a special GRUB Error 13</title>
	<meta name="description" content="A few days ago I got my first kernel update for my netbook in 7 months. However, it did not boot anymore. Here's what I did to fix it.">

	<link rel="stylesheet" href="/css/main.css">
	<link rel="canonical" href="http://derjoachim.nl/blog/2011/04/21/troubleshooting-a-special-grub-error-13">
	<link rel="alternate" type="application/rss+xml" title="Der Joachim" href="http://derjoachim.nl/feed.xml" />
	<script type="text/javascript">
		/*
		var _gaq = _gaq || [];
 	 	 _gaq.push(['_setAccount', 'UA-22946638-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
			*/
	</script>
</head>

	<body>
		<header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="/">Der Joachim</a>
    <nav class="site-nav">
		<ul role="navigation">
            
            
            
            <li class="navbar_item" role="menuitem">
                <a href="/index.html">Joablog</a>
            </li>
            
            
            
            <li class="navbar_item" role="menuitem">
                <a href="/about-me">About Me</a>
            </li>
            
            
            
            <li class="navbar_item" role="menuitem">
                <a href="/curriculum-vitae">Curriculum Vitae</a>
            </li>
            		
		</ul>
    </nav>
  </div>
</header>

		<div class="container bottom-margin">
	<div class="post">
		<div class="post-article" itemscope itemprop="blogPost" itemtype="http://schema.org/BlogPosting">
			<header class="post-header">
				<h1 class="post-title" itemprop="headline">Troubleshooting a special GRUB Error 13</h1>
				
				<h3 class="dateauthor">
					<span itemprop="datePublished">21 April 2011</span> by <span itemscope itemtype="http://schema.org/Person"><span itemprop="author">Joachim van de Haterd</span></span>
			</header>
			<article class="post-content">
				
    			<p>A few days ago I got my first kernel update for my netbook in 7 months. However, it did not boot anymore. Here's what I did to fix it.</p>




<p>I own an EEEPC, one of the earliest generations. A few months ago, I converted from Ext2 to Ex4 file partitions. This was probably the underlying problem, so I am explicitly mentioning it here.</p>




<p>When I installed Arch Linux, I was advised to install a special kernel maintained by somebody who called himself Toofishes. Kudos to the man. However, he quit somewhere in August. I was just considering switching back to the vanilla kernel (or making my own), but yesterday, i suddenly saw that a new kernel had been built! Yay!</p>




<p>After updating, I rebooted and got the dreaded GRUB error 13.</p>




<pre>
    <code>
        root hd0,0
        File system type is ext2fs, partition type 0x83
        Error 13:  Invalid or unsupported executable format
    </code>
</pre>




<p>My fallback kernels (which I never use), gave me the same error.</p>




<p>Before panicking, I googled the dreaded error 13 and I was not too suprised to find many results. All I needed, was a boot disk, and a healthy dose of command line magic. After booting the boot disk, I needed to use the following :</p>




<p>First I needed to mount the partitions on the HDD.</p>




<pre>
    <code>
        # mkdir /mnt/arch
        # mount -t ext4 /dev/sda1 /mnt/arch
        # mount -t proc proc /mnt/arch/proc
        # mount -t sysfs sys /mnt/arch/sys
        # mount -o bind /dev /mnt/arch/dev
    </code>
</pre>




<p>The second step was a chroot. After all, we want grub to choose the right file system.</p>




<pre>
    <code>
    # chroot /mnt/arch /bin/bash
    </code>
</pre>




<p>The (theoretically) final step is to rerun grub-install. The --recheck option makes sure that the disks are properly probed.</p>




<pre>
    <code>
        # grub-install --recheck /dev/sda
    </code>
</pre>




<p>In my case, I got a nasty error:</p>




<pre>
    <code>
        /dev/root not found or not a block device
    </code>
</pre>




<p>This one did not pop up in the standard documentation. So either the documentation is lacking, or my case was a special one. I am going for the second option. Let's take a look at the line before the error 13 line:</p>




<pre>
    <code>
        File system type is ext2fs, partition type 0x83
    </code>
</pre>




<p>Since my partitions have long been moved to Ext4, I suspected that this should be the culprit. So, back to the search engine again.</p>




<p>A quick search yielded the following command:</p>




<pre>
    <code>
        # grep -v rootfs /proc/mounts &gt; /etc/mtab
    </code>
</pre>




<p>Either, I had to edit mtab when converting my Ext2 partitions to Ext4 and forgot, or my mtab was broken in some other way. However, the grub-install worked this time and my laptop boots fine now.</p>




<h2>Acknowledgment</h2>




<p>For troubleshooting this issue, I used the following two pages.</p>




<ul>
    <li><a href="https://wiki.archlinux.org/index.php/Create_an_Ext4_Partition#GRUB_Error_13" target="_blank">https://wiki.archlinux.org/index.php/Create_an_Ext4_Partition#GRUB_Error_13</a></li>
    <li><a href="http://www.gentoo.org/doc/en/grub-error-guide.xml" target="_blank">http://www.gentoo.org/doc/en/grub-error-guide.xml</a></li>
</ul>


			</article>
		</div>
		<div class="post-sidebar">
		<aside>
			&nbsp;
		</aside>
		</div>
	</div>
	<div class="col12">
		<div class="paginator col4 shift2">
			<ul>
				
				<li><a href="/blog/2011/04/02/remade-unmade">&laquo; Previous</a></li>
				
				<li><a href="/">Home</a></li>
				
				<li><a href="/blog/2011/04/30/hollow-patriotism">Next &raquo;</a></li>
				
			</ul>
		</div>
	</div>
</div>

		<footer class="site-footer">
	<div class="footer-container">
		<div class="footer-left">
			<ul>
				
				<li><a href="http://twitter.com/joachimvdhaterd" target="_blank"><span class="icon-twitter"></span></a></li>
				
				<li><a href="http://www.linkedin.com/in/joachimvandehaterd" target="_blank"><span class="icon-linkedin"></span></a></li>
				
				<li><a href="https://github.com/derjoachim" target="_blank"><span class="icon-github"></span></a></li>
				
				<li><a href="http://www.last.fm/user/der_joachim" target="_blank"><span class="icon-lastfm"></span></a></li>
				
				<li><a href="http://www.stumbleupon.com/stumbler/derjoachim/" target="_blank"><span class="icon-stumbleupon"></span></a></li>
				
				<li><a href="feed.xml" target="_blank"><span class="icon-RSS"></span></a></li>
				
			</ul>
			<ul class="nav-bottom">
            
            
            
            <li class="nav-bottom-item" role="menuitem">
                <a href="/disclaimer">Disclaimer</a>
            </li>
            
            
            
            <li class="nav-bottom-item" role="menuitem">
                <a href="/acknowledgment">Acknowledgment</a>
            </li>
            
            
            
            <li class="nav-bottom-item" role="menuitem">
                <a href="/stack">Stack</a>
            </li>
            		
			</ul>
		</div>
		<div class="footer-right">
			&copy; Joachim van de Haterd, 2011-2015
			<a href="#top"><span class="icon-circle-up"></span></a>
		</div>
	</div>
</footer>

	</body>
</html>
